<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <!-- Bootstrap CSS -->
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
 <!-- Font Awesome for icons -->
 <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
 <link rel="stylesheet" href="/css/side_top.css">
 <script src="/js/side_top.js"></script>
 <style>

   #content { margin-left: 0; transition: margin-left 0.3s; padding: 20px; }

   /* Card styles */
   .card-container {
     display: grid;
     grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
     gap: 20px;
     margin-bottom: 30px;
   }

   .total-card {
     background: #fff;
     border-radius: 10px;
     padding: 20px;
     box-shadow: 0 2px 4px rgba(0,0,0,0.1);
     text-align: center;
   }

   .total-card h3 {
     color: #666;
     margin-bottom: 10px;
     font-size: 1.1em;
   }

   .total-card h1 {
     color: #333;
     font-size: 2em;
     margin: 0;
   }

   /* Dashboard row styles */
   .dashboard-row {
     display: grid;
     grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
     gap: 20px;
     margin-top: 20px;
   }

   /* Low inventory card styles */
   .low-inventory-card {
     background: #fff;
     border-radius: 10px;
     padding: 20px;
     box-shadow: 0 2px 4px rgba(0,0,0,0.1);
   }

   .low-inventory-title {
     color: #333;
     font-size: 1.2em;
     margin-bottom: 20px;
     display: flex;
     align-items: center;
   }

   .low-inventory-icon {
     color: #ffc107;
   }

   .low-inventory-table {
     width: 100%;
     border-collapse: collapse;
   }

   .low-inventory-table th,
   .low-inventory-table td {
     padding: 12px;
     text-align: left;
     border-bottom: 1px solid #eee;
   }

   .low-inventory-table th {
     background-color: #f8f9fa;
     font-weight: 600;
   }

   .low-inventory-btn {
     background-color: #007bff;
     color: white;
     border: none;
     padding: 6px 12px;
     border-radius: 4px;
     cursor: pointer;
   }

   .low-inventory-btn:hover {
     background-color: #0056b3;
   }

   .low-inventory-pagination {
     display: flex;
     justify-content: center;
     align-items: center;
     margin-top: 20px;
     gap: 10px;
   }

   .low-inventory-page-btn {
     background-color: #f8f9fa;
     border: 1px solid #dee2e6;
     padding: 6px 12px;
     border-radius: 4px;
     cursor: pointer;
   }

   .low-inventory-page-btn:disabled {
     opacity: 0.5;
     cursor: not-allowed;
   }

   .low-inventory-page-number {
     font-weight: 600;
   }

   /* Chart card styles */
   .chart-card {
     background: #fff;
     border-radius: 10px;
     padding: 20px;
     box-shadow: 0 2px 4px rgba(0,0,0,0.1);
   }

   .chart-card h2 {
     color: #333;
     font-size: 1.2em;
     margin-bottom: 20px;
   }

   .chart-container {
     position: relative;
     height: 300px;
   }
 </style>

  <title>Dashboard UI</title>
</head>
<body>
         <!-- Topbar -->
         <div class="topbar">
          <div class="topbar-left">
              <div class="menu-toggle" onclick="toggleSidebar()">
                  <i class="fas fa-bars"></i>
              </div>
          </div>
          <div class="topbar-right">
              <div class="notification-icon" onclick="toggleNotifications()">
                  <i class="fas fa-bell"></i>
                  <span class="notification-badge"></span>
              </div>
              <div class="profile-section" onclick="window.location.href='/hr/hr_profile'">
                  <div class="profile-info">
                      <div class="profile-name"></div>
                      <div class="profile-position"></div>
                  </div>
                  <div class="profile-picture-container" style="width: 40px; height: 40px; margin: 0;">
                      <img src="/images/default-profile.png" alt="Profile" class="profile-picture" id="topbarProfilePicture">
                  </div>
              </div>
          </div>
          
          <!-- Notification Dropdown -->
          <div class="notification-dropdown" id="notificationDropdown">
              <div class="notification-header">
                  <span>Notifications</span>
                  <button class="mark-all-read" onclick="markAllAsRead()">Mark all as read</button>
              </div>
              <div class="notification-item">
                  <div class="notification-title">New Leave Request</div>
                  <div class="notification-time">5 minutes ago</div>
              </div>
              <div class="notification-item">
                  <div class="notification-title">Payroll Processed</div>
                  <div class="notification-time">1 hour ago</div>
              </div>
              <div class="notification-item">
                      <span class="profile-name">John Doe</span>
                      <span class="profile-position">HR Manager</span>
                  </div>
              </div>
              
              <!-- Notification Dropdown -->
              <div class="notification-dropdown" id="notificationDropdown">
                  <div class="notification-header">
                      <span>Notifications</span>
                      <button class="mark-all-read" onclick="markAllAsRead()">Mark all as read</button>
                  </div>
                  <div class="notification-item">
                      <div class="notification-title">New Leave Request</div>
                      <div class="notification-time">5 minutes ago</div>
                  </div>
                  <div class="notification-item">
                      <div class="notification-title">Payroll Processed</div>
                      <div class="notification-time">1 hour ago</div>
                  </div>
                  <div class="notification-item">
                      <div class="notification-title">New Employee Added</div>
                      <div class="notification-time">2 hours ago</div>
                  </div>
              </div>
          </div>
      </div>
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <img src="/image/mdb-removebg-preview.png" alt="MDB Logo">
      <span class="company-title">MDB Construction</span>
  </div>
    <ul class="list-unstyled">
      <li class="nav-item">
        <a class="nav-item" href="/scm/scm-dashboard"><i class="fas fa-tachometer-alt"></i> <span> Dashboard</span></a>
      </li>
      <li class="nav-item">
        <a href="/scm/inventory"><i class="fas fa-box"></i> <span> Inventory</span></a>
      </li>
      <li class="nav-item">
        <a href="/scm/supplier"><i class="fas fa-users"></i> <span> Supplier</span></a>
      </li>
      
      <li class="nav-item">
        <a href="/scm/request_material"><i class="fas fa-plus-circle"></i> <span> Request Material</span></a>
      </li>
      <li class="nav-item">
        <a href="/scm/outside_purchases"><i class="fas fa-receipt"></i> <span> Outside Purchases</span></a>
      </li>
     
      <li class="nav-item">
        <a href="/scm/order"><i class="fas fa-shopping-cart"></i> <span> Order</span></a>
      </li>
      <li class="nav-item">
        <a href="/scm/purchase_request"><i class="fas fa-file-invoice"></i> <span> Purchase Request</span></a>
      </li>
      <li class="nav-item">
          <a href="/scm/supplier_dashboard"><i class="fas fa-user-tie"></i> <span> Supplier Dashboard</span></a>
      </li>
      <li class="logout nav-item"><a href="/logout"><i class="fas fa-sign-out-alt"></i> <span> Logout</span></a></li>
    </ul>
  </div>

  <div id="content">

    <div class="card-container">
      <div class="total-card">
        <h3>Total Stock</h3>
        <h1>1000 Units</h1>
      </div>
    
      <div class="total-card">
        <h3>Total Material Types</h3>
        <h1>1000</h1>
      </div>
    
      <div class="total-card">
        <h3>Total Purchase</h3>
        <h1>â‚±1000000</h1>
      </div>
    </div>

<div class="dashboard-row">
   

    <div class="low-inventory-card">
      <h2 class="low-inventory-title">Low Inventory<i style="margin-left: 10px;" class="bi bi-exclamation-triangle-fill low-inventory-icon"></i></h2>
      <table class="low-inventory-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Quantity</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody class="low-inventory-body">
          <!-- Low stock items will be inserted dynamically -->
        </tbody>
      </table>
      <div class="low-inventory-pagination">
        <!-- Pagination buttons will be inserted dynamically -->
      </div>
    </div>






    <div class="low-inventory-card">
      <h2 class="low-inventory-title">Top Suppliers<i style="margin-left: 10px;" class="bi bi-star-fill low-inventory-icon"></i></h2>
      <table class="low-inventory-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Ratings</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="topSuppliersBody" class="low-inventory-body">
          <!-- Supplier rows will be populated here -->
        </tbody>
      </table>
      
      <div id="topSuppliersPagination" class="low-inventory-pagination">
        <!-- Pagination buttons will be populated here -->
      </div>
    </div>

    <div class="card chart-card">
      <h2>Inventory Distribution</h2>
      <div class="chart-container">
        <canvas id="inventoryPieChart"></canvas>
      </div>
    </div>
    
  </div>
    
    
    

    
    
    
    

    
  </div>


<script>
    /* piechart */
    const ctx = document.getElementById('inventoryPieChart').getContext('2d');
    new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Cement', 'Steel', 'Sand', 'Gravel'],
        datasets: [{
          label: 'Materials',
          data: [12, 19, 7, 9],
          backgroundColor: [
            '#38bdf8', // Blue
            '#34d399', // Green
            '#facc15', // Yellow
            '#f87171'  // Red
          ],
          borderColor: '#0f172a',
          borderWidth: 1
        }]
      },
      options: {
        plugins: {
          legend: {
            labels: {
              color: '#fff' // Text color for legend
            }
          }
        }
      }
    });

    /* low stock alert */
      const lowStockItems = [
        { name: 'Cement', quantity: 3 },
        { name: 'Steel', quantity: 5 },
        { name: 'Sand', quantity: 2 },
        { name: 'Gravel', quantity: 4 },
        { name: 'Nails', quantity: 3 },
        { name: 'Nails', quantity: 3 },
        { name: 'Nails', quantity: 3 },
        { name: 'Nails', quantity: 3 },
        { name: 'Nails', quantity: 3 },
        { name: 'Nails', quantity: 3 },
        { name: 'Nails', quantity: 3 },
        { name: 'Nails', quantity: 3 },
        { name: 'Paint', quantity: 1 }
      ];
    
      let lowStockCurrentPage = 1;
      const lowStockItemsPerPage = 3;
    
      function renderLowStockTable() {
        const tbody = document.querySelector('.low-inventory-body');
        tbody.innerHTML = '';
        const start = (lowStockCurrentPage - 1) * lowStockItemsPerPage;
        const end = start + lowStockItemsPerPage;
        const currentItems = lowStockItems.slice(start, end);
    
        currentItems.forEach(item => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${item.name}</td>
            <td>${item.quantity}</td>
            <td><button class="low-inventory-btn">View</button></td>
          `;
          tbody.appendChild(row);
        });
    
        renderLowStockPagination();
      }
    
      function renderLowStockPagination() {
        const container = document.querySelector('.low-inventory-pagination');
        container.innerHTML = '';
        const totalPages = Math.ceil(lowStockItems.length / lowStockItemsPerPage);
    
        const prevBtn = document.createElement('button');
        prevBtn.className = 'low-inventory-page-btn';
        prevBtn.textContent = 'Previous';
        prevBtn.disabled = lowStockCurrentPage === 1;
        prevBtn.onclick = () => {
          if (lowStockCurrentPage > 1) {
            lowStockCurrentPage--;
            renderLowStockTable();
          }
        };
        container.appendChild(prevBtn);
    
        const pageNum = document.createElement('span');
        pageNum.className = 'low-inventory-page-number';
        pageNum.textContent = lowStockCurrentPage;
        container.appendChild(pageNum);
    
        const nextBtn = document.createElement('button');
        nextBtn.className = 'low-inventory-page-btn';
        nextBtn.textContent = 'Next';
        nextBtn.disabled = lowStockCurrentPage === totalPages;
        nextBtn.onclick = () => {
          if (lowStockCurrentPage < totalPages) {
            lowStockCurrentPage++;
            renderLowStockTable();
          }
        };
        container.appendChild(nextBtn);
      }
    
      // Initial render
      renderLowStockTable();
   
    


      /* top supplier */
      
  const topSuppliers = [
    { id: '001', name: 'XYZ Supplies', ratings: 4.8 },
    { id: '002', name: 'ABC Traders', ratings: 4.6 },
    { id: '003', name: 'LMN Distributors', ratings: 4.9 },
    { id: '004', name: 'PQR Merchants', ratings: 4.7 },
    { id: '005', name: 'DEF Enterprises', ratings: 4.5 },
    { id: '006', name: 'GHI Suppliers', ratings: 4.8 }
  ];

  let topSuppliersCurrentPage = 1;
  const topSuppliersPerPage = 3;

  function renderTopSuppliersTable() {
    const tbody = document.getElementById('topSuppliersBody');
    tbody.innerHTML = '';
    const start = (topSuppliersCurrentPage - 1) * topSuppliersPerPage;
    const end = start + topSuppliersPerPage;
    const currentSuppliers = topSuppliers.slice(start, end);

    currentSuppliers.forEach(supplier => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${supplier.id}</td>
        <td>${supplier.name}</td>
        <td>${supplier.ratings}</td>
        <td><button class="low-inventory-btn">View</button></td>
      `;
      tbody.appendChild(row);
    });

    renderTopSuppliersPagination();
  }

  function renderTopSuppliersPagination() {
    const container = document.getElementById('topSuppliersPagination');
    container.innerHTML = '';
    const totalPages = Math.ceil(topSuppliers.length / topSuppliersPerPage);

    const prevBtn = document.createElement('button');
    prevBtn.className = 'low-inventory-page-btn';
    prevBtn.textContent = 'Previous';
    prevBtn.disabled = topSuppliersCurrentPage === 1;
    prevBtn.onclick = () => {
      if (topSuppliersCurrentPage > 1) {
        topSuppliersCurrentPage--;
        renderTopSuppliersTable();
      }
    };
    container.appendChild(prevBtn);

    const pageNum = document.createElement('span');
    pageNum.className = 'low-inventory-page-number';
    pageNum.textContent = topSuppliersCurrentPage;
    container.appendChild(pageNum);

    const nextBtn = document.createElement('button');
    nextBtn.className = 'low-inventory-page-btn';
    nextBtn.textContent = 'Next';
    nextBtn.disabled = topSuppliersCurrentPage === totalPages;
    nextBtn.onclick = () => {
      if (topSuppliersCurrentPage < totalPages) {
        topSuppliersCurrentPage++;
        renderTopSuppliersTable();
      }
    };
    container.appendChild(nextBtn);
  }

  // Initial render
  renderTopSuppliersTable();


      
      

</script>

<script>
// Add the sidebar toggle logic
document.getElementById('sidebar-toggle').onclick = function() {
    const sidebar = document.getElementById('sidebar');
    const content = document.getElementById('content');
    if (sidebar.style.display === 'none' || sidebar.style.display === '') {
        sidebar.style.display = 'block';
        content.style.marginLeft = '300px';
    } else {
        sidebar.style.display = 'none';
        content.style.marginLeft = '0';
    }
};
</script>
</body>
</html>
